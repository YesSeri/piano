(this.webpackJsonpa=this.webpackJsonpa||[]).push([[4],{33:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(4),a=n(3),o=n(1),i=n.n(o),u=n(31),s=n(17),l=function e(t,n,c,r){Object(s.a)(this,e),this.id=t,this.note=n,this.color=c,this.d=r},v=[new l("c2-small","C2","white","M10.848.265v31.75H1.323a1.056 1.056 0 01-1.058-1.059V.265h10.583z"),new l("d2-small","D2","white","M10.848.265h10.583v31.75H10.848z"),new l("e2-small","E2","white","M21.431.265h10.583v31.75H21.431z"),new l("f2-small","F2","white","M32.015.265h10.583v31.75H32.015z"),new l("g2-small","G2","white","M42.598.265h10.583v31.75H42.598z"),new l("a2-small","A2","white","M53.181.265h10.583v31.75H53.181z"),new l("b2-small","B2","white","M63.765.265h10.583v31.75H63.765z"),new l("c3-small","C3","white","M74.348.265v31.75h9.525c.586 0 1.058-.472 1.058-1.059V.265H74.348z"),new l("cs2-small","C#2","black","M15.081.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"),new l("ds2-small","D#2","black","M25.665.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"),new l("fs2-small","F#2","black","M46.831.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"),new l("gs2-small","G#2","black","M57.415.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"),new l("as2-small","A#2","black","M67.998.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.587 0-1.059-.44-1.059-.988V.265z")],d={q:"C2",w:"D2",e:"E2",r:"F2",t:"G2",y:"A2",u:"B2",i:"C3",2:"C#2",3:"D#2",5:"F#2",6:"G#2",7:"A#2"},f=n(19),h=n(20),w=function(e,t){var n=Object(o.useState)([]),c=Object(r.a)(n,2)[1],a=i.a.useRef([]),u=i.a.useRef([]);return Object(o.useEffect)((function(){var n=function(n){var r=n.key,o=n.repeat,i=t[r];!i||o||a.current.includes(i)||(a.current=[].concat(Object(h.a)(a.current),[i]),c(a.current),e.triggerAttack(i))},r=function(n){var r=n.key,o=t[r];a.current=a.current.filter((function(e){return e!==o})),c(a.current),e.triggerRelease(o)};return window.addEventListener("keydown",n),window.addEventListener("keyup",r),function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",r)}}),[e,t]),Object(o.useEffect)((function(){function t(e,t){return{note:t,identifier:e.identifier}}var n=function(n){n.preventDefault();var r=n.target.dataset.note,a=t(n.changedTouches[0],r);u.current=[].concat(Object(h.a)(u.current),[a]),c(u.current),e.triggerAttack(r)},r=function(n){u.current.length>0&&n.preventDefault();var r,o=Object(f.a)(n.changedTouches);try{var i=function(){var n=r.value,o=a(n);if(void 0===o)return{v:void 0};var i=t(n,o.note);console.log(i),u.current=u.current.filter((function(e){return e.note!==i.note})),c.apply(void 0,Object(h.a)(u.current)),e.triggerRelease(i.note)};for(o.s();!(r=o.n()).done;){var s=i();if("object"===typeof s)return s.v}}catch(l){o.e(l)}finally{o.f()}},a=function(e){var t,n=function(e){return{x:e.clientX,y:e.clientY}}(e),c=n.x,r=n.y;return null===(t=document.elementFromPoint(c,r))||void 0===t?void 0:t.dataset},o=function(n){n.preventDefault();var r,o=Object(f.a)(n.changedTouches);try{var i=function(){var n=r.value,o=a(n);if(void 0===o)return{v:void 0};var i=t(n,o.note),s=u.current.find((function(e){return e.identifier===i.identifier}))||{note:void 0,identifier:i.identifier};i.note!==s.note&&(console.log("note",i,"prev",s),u.current=u.current.filter((function(e){return e.note!==s.note})),u.current=[].concat(Object(h.a)(u.current),[i]),null!=i.note&&e.triggerAttack(i.note),null!=s.note&&e.triggerRelease(s.note),c(u.current))};for(o.s();!(r=o.n()).done;){var s=i();if("object"===typeof s)return s.v}}catch(l){o.e(l)}finally{o.f()}},i=document.getElementsByClassName("piano")[0];return i.addEventListener("touchstart",n,{passive:!1}),document.addEventListener("touchend",r),document.addEventListener("touchmove",o,{passive:!1}),function(){i.removeEventListener("touchstart",n,{passive:!1}),document.removeEventListener("touchend",r),document.removeEventListener("touchmove",o,{passive:!1})}}),[e]),[].concat(Object(h.a)(u.current.map((function(e){return e.note}))),Object(h.a)(a.current))};var m=n(0),g=function(e){var t=e.sampler,n=function(e){var t=Object(o.useState)(null),n=Object(r.a)(t,2)[1],c=Object(o.useState)(null),a=Object(r.a)(c,2)[1],u=i.a.useRef(null),s=i.a.useRef(null),l=i.a.useRef(!1);return Object(o.useEffect)((function(){var e=function(e){if(l.current=!1,void 0!==e.target.dataset){var t=e.target.dataset.note;u.current=null,s.current=t,a(t),n(null)}},t=function(e){if(!0===l.current){if(void 0===e.target.dataset)return;var t=e.target.dataset.note,c=u.current;t!==c&&(console.log({note:t,prevNote:c}),u.current=t,s.current=c,n(t),a(c))}},c=function(e){l.current=!0;var t=e.target.dataset.note;t&&(u.current=t,s.current=null,n(t),a(null))};return window.addEventListener("mousedown",c),window.addEventListener("mousemove",t),window.addEventListener("mouseup",e),function(){window.removeEventListener("mousedown",c),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)}}),[e]),[u.current,s.current]}(),c=Object(r.a)(n,2),a=c[0],u=c[1],s=w(t,d);return Object(o.useEffect)((function(){null!=a&&t.triggerAttack(a)}),[t,a]),Object(o.useEffect)((function(){null!=u&&t.triggerRelease(u)}),[t,u]),Object(m.jsx)("div",{className:"piano piano-small",children:Object(m.jsx)("svg",{id:"piano-svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 85.196 32.279",preserveAspectRatio:"none",children:v.map((function(e){return function(e,t,n,c){return Object(m.jsx)("path",{"data-note":t,onContextMenu:function(e){return e.preventDefault()},className:"".concat(n,"-key piano-key ").concat(s.includes(t)||a===t?"active":""),d:c},e)}(e.id,e.note,e.color,e.d)}))})})},b=n.p+"static/media/1.g3.8f81a3b9.ogg",p=n.p+"static/media/3.a3.9c12f360.ogg",j=n.p+"static/media/6.c4.2377fed6.ogg",O=n.p+"static/media/9.ds4.fc86c751.ogg",M=n.p+"static/media/12.fs4.d9071cbe.ogg",E=n.p+"static/media/15.a4.1f51ad50.ogg",z=n.p+"static/media/18.c5.350a2ba1.ogg",k=n.p+"static/media/21.ds5.929d4e7b.ogg",y=function e(t,n,c,r){Object(s.a)(this,e),this.id=t,this.note=n,this.color=c,this.d=r},L={c:"G1",v:"A1",b:"B1",q:"C2",w:"D2",e:"E2",r:"F2",t:"G2",y:"A2",u:"B2",i:"C3",o:"D3",f:"G#1",g:"A#1",2:"C#2",3:"D#2",5:"F#2",6:"G#2",7:"A#2"},A=[["g1","G1","white","M10.848.265v31.75H1.323c-.794 0-1.058-.265-1.058-1.059V.265z"],["a1","A1","white","M10.848.265h10.583v31.75H10.848z"],["b1","B1","white","M21.431.265h10.583v31.75H21.431z"],["c2","C2","white","M32.015.265h10.583v31.75H32.015z"],["d2","D2","white","M42.598.265h10.583v31.75H42.598z"],["e2","E2","white","M53.181.265h10.583v31.75H53.181z"],["f2","F2","white","M63.765.265h10.583v31.75H63.765z"],["g2","G2","white","M74.348.265h10.583v31.75H74.348z"],["a2","A2","white","M84.931.265h10.583v31.75H84.931z"],["b2","B2","white","M95.515.265h10.583v31.75H95.515z"],["c3","C3","white","M106.098.265h10.583v31.75h-10.583z"],["d3","D3","white","M116.681.265v31.75h9.525c.794 0 1.059-.265 1.059-1.059V.265z"],["gs1","G#1","black","M15.081.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["as1","A#1","black","M25.665.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["cs2","C#2","black","M46.831.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["ds2","D#2","black","M57.415.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["fs2","F#2","black","M78.581.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["gs2","G#2","black","M89.165.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["as2","A#2","black","M99.748.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.587 0-1.059-.44-1.059-.988V.265z"],["cs3","C#3","black","M120.915.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"]],x=A.map((function(e){return new y(e[0],e[1],e[2],e[3])})),H=function(e){var t=e.sampler,n=Object(o.useState)(""),c=Object(r.a)(n,2),a=c[0],i=c[1],u=w(t,L);return Object(o.useEffect)((function(){var e=function(e){console.log(e),t.triggerRelease(a)},n=function(e){console.log(e)},c=function(e){console.log(e);var n=e.target.dataset.note;n&&(i(n),t.triggerAttack(n))};return window.addEventListener("mousedown",c),window.addEventListener("mousemove",n),window.addEventListener("mouseup",e),function(){window.removeEventListener("mousedown",c),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",e)}}),[t,a]),Object(m.jsx)("div",{className:"piano piano-large",children:Object(m.jsx)("svg",{id:"piano-svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 127.529 32.279",preserveAspectRatio:"none",children:x.map((function(e){return function(e,t,n,c){return Object(m.jsx)("path",{"data-note":t,onContextMenu:function(e){return e.preventDefault()},className:"".concat(n,"-key piano-key ").concat(u.includes(t)?"active":""),d:c},e)}(e.id,e.note,e.color,e.d)}))})})},C=n(32),D=new u.a(b),V=new u.a(p),G=new u.a(j),R=new u.a(O),F=new u.a(M),B=new u.a(E),N=new u.a(z),S=new u.a(k);t.default=function(e){var t=e.largePiano,n=(e.octaveHigher,e.children,Object(a.a)(e,["largePiano","octaveHigher","children"])),i=Object(o.useState)(!1),s=Object(r.a)(i,2),l=s[0],v=s[1],d=Object(C.b)(),f=new u.b({urls:{G1:D,A1:V,C2:G,"D#2":R,"F#2":F,A2:B,C3:N,"D#3":S},baseUrl:"../../assets/audio",release:1,onload:function(){v(!0)}}).toDestination(),h=function(){return l?t?Object(m.jsx)(H,{sampler:f}):Object(m.jsx)(g,{sampler:f}):null};return Object(m.jsxs)("div",Object(c.a)(Object(c.a)({className:"piano-container"},n),{},{children:[Object(m.jsx)(C.a,{handle:d,children:Object(m.jsx)(h,{})}),Object(m.jsx)("button",{id:"fullscreen-btn",onClick:function(){d.enter()},children:"Enter fullscreen"})]}))}}}]);
//# sourceMappingURL=4.fcc3b73b.chunk.js.map