{"version":3,"sources":["component/smallPiano/data.js","component/smallPiano/SmallPiano.js","component/audio/1.g3.ogg","component/audio/3.a3.ogg","component/audio/6.c4.ogg","component/audio/9.ds4.ogg","component/audio/12.fs4.ogg","component/audio/15.a4.ogg","component/audio/18.c5.ogg","component/audio/21.ds5.ogg","component/largePiano/data.js","component/largePiano/LargePiano.js","component/PianoContainer.js"],"names":["KeyInfo","id","note","color","d","this","smallKeys","translation","useActiveNoteHandler","sampler","useState","setNotes","noteRef","React","useRef","useEffect","handleKeyDown","key","repeat","current","includes","triggerAttack","handleKeyUp","filter","k","triggerRelease","window","addEventListener","removeEventListener","handleTouchStart","e","preventDefault","target","dataset","handleTouchEnd","piano","document","getElementById","passive","SmallPiano","clicked","setClicked","activeKeys","console","log","handleMouseUp","handleMouseDown","xmlns","viewBox","preserveAspectRatio","map","data-note","onContextMenu","className","createPath","largeKeys","LargePiano","g3b","Buffer","g3","a3b","a3","c4b","c4","ds4b","ds4","fs4b","fs4","a4b","a4","c5b","c5","ds5b","ds5","Container","largePiano","props","octaveHigher","children","loaded","setLoaded","handle","useFullScreenHandle","Sampler","urls","baseUrl","release","onload","toDestination","Piano","onClick","enter"],"mappings":"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","file":"static/js/4.e7b8a89c.chunk.js","sourcesContent":["class KeyInfo {\n    constructor(id, note, color, d) {\n        this.id = id;\n        this.note = note;\n        this.color = color;\n        this.d = d;\n    }\n}\n\nexport const smallKeys = [\n    new KeyInfo('c2-small', 'C2', 'white', \"M10.848.265v31.75H1.323a1.056 1.056 0 01-1.058-1.059V.265h10.583z\"),\n    new KeyInfo('d2-small', 'D2', 'white', \"M10.848.265h10.583v31.75H10.848z\"),\n    new KeyInfo('e2-small', 'E2', 'white', \"M21.431.265h10.583v31.75H21.431z\"),\n    new KeyInfo('f2-small', 'F2', 'white', \"M32.015.265h10.583v31.75H32.015z\"),\n    new KeyInfo('g2-small', 'G2', 'white', \"M42.598.265h10.583v31.75H42.598z\"),\n    new KeyInfo('a2-small', 'A2', 'white', \"M53.181.265h10.583v31.75H53.181z\"),\n    new KeyInfo('b2-small', 'B2', 'white', \"M63.765.265h10.583v31.75H63.765z\"),\n    new KeyInfo('c3-small', 'C3', 'white', \"M74.348.265v31.75h9.525c.586 0 1.058-.472 1.058-1.059V.265H74.348z\"),\n    new KeyInfo('cs2-small', 'C#2', 'black', \"M15.081.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('ds2-small', 'D#2', 'black', \"M25.665.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('fs2-small', 'F#2', 'black', \"M46.831.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('gs2-small', 'G#2', 'black', \"M57.415.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('as2-small', 'A#2', 'black', \"M67.998.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.587 0-1.059-.44-1.059-.988V.265z\"),\n]\n\nexport const translation = {\n    'q': 'C2',\n    'w': 'D2',\n    'e': 'E2',\n    'r': 'F2',\n    't': 'G2',\n    'y': 'A2',\n    'u': 'B2',\n    'i': 'C3',\n    '2': 'C#2',\n    '3': 'D#2',\n    '5': 'F#2',\n    '6': 'G#2',\n    '7': 'A#2',\n}","import React, { useEffect, useState } from 'react'\nimport { smallKeys, translation } from './data'\nconst SmallPiano = ({ sampler }) => {\n  const [clicked, setClicked] = useState('')\n  const activeKeys = useActiveNoteHandler(sampler)\n  console.log(activeKeys);\n\n  const createPath = (id, note, color, d) => {\n    return <path\n      key={id}\n      data-note={note}\n      onContextMenu={(e) => e.preventDefault()}\n      className={`${color}-key piano-key ${activeKeys.includes(note) ? 'active' : ''}`} d={d}\n    />\n  }\n  // These two gets highlighted using pseudoclass instead of .active class.\n  // Since two keys can't get pressed at the same time with the mouse, the problem I have to solve for keypresses doesn't appear here. \n  useEffect(() => {\n    const handleMouseUp = () => {\n      sampler.triggerRelease(clicked)\n    }\n    const handleMouseDown = (e) => {\n      const { note } = e.target.dataset\n      if (!note) return\n      setClicked(note)\n      sampler.triggerAttack(note)\n    }\n\n    // Here instead of in path because I mouse sometimes get released not over the clicked note.\n    window.addEventListener('mousedown', handleMouseDown);\n    window.addEventListener('mouseup', handleMouseUp);\n    return () => {\n      window.removeEventListener('mousedown', handleMouseDown);\n      window.removeEventListener('mouseup', handleMouseUp);\n    }\n  }, [sampler, clicked])\n\n\n\n  return (\n    <div id='piano-small' >\n      <svg id='piano-svg' xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 85.196 32.279\" preserveAspectRatio=\"none\">\n        {smallKeys.map(({ id, note, color, d }) => createPath(id, note, color, d))}\n      </svg>\n    </div>\n  )\n}\n// This returns the pressed notes so the class active can get added to pressed keys. It also plays the notes.\nconst useActiveNoteHandler = (sampler) => {\n  const [, setNotes] = useState([])\n  const noteRef = React.useRef([])\n  useEffect(() => {\n    const handleKeyDown = ({ key, repeat }) => {\n      const note = translation[key]\n      if (!note || repeat || noteRef.current.includes(note)) return;\n      // I have to do it like this. If I use usestate here instead of ref it will remove and add the eventlisteners every time i click. This means if I release two keys at the same time the eventlistener for one of them might get removed by releasing the other key, and the website wont register the release of the key. I only use setNotes to trigger a rerender, it doesn't actually get used for anything else. \n      noteRef.current = [...noteRef.current, note]\n      setNotes(noteRef.current)\n      sampler.triggerAttack(note)\n    }\n    const handleKeyUp = ({ key }) => {\n      const note = translation[key]\n      noteRef.current = noteRef.current.filter(k => k !== note)\n      setNotes(noteRef.current)\n      sampler.triggerRelease(note)\n    }\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [sampler])\n  useEffect(() => {\n    const handleTouchStart = (e) => {\n      e.preventDefault()\n      const { note } = e.target.dataset\n      noteRef.current = [...noteRef.current, note]\n      setNotes(noteRef.current);\n      sampler.triggerAttack(note)\n    }\n\n    const handleTouchEnd = (e) => {\n      e.preventDefault()\n      const { note } = e.target.dataset\n      noteRef.current = noteRef.current.filter(k => k !== note)\n      setNotes(noteRef.current)\n      sampler.triggerRelease(note)\n    }\n    const piano = document.getElementById('piano-small')\n    // I need to add eventlistener here, instead of inline in element, because I need to set it to passive, so I can prevent default.\n    piano.addEventListener('touchstart', handleTouchStart, { passive: false });\n    document.addEventListener('touchend', handleTouchEnd);\n    return () => {\n      piano.removeEventListener('touchstart', handleTouchStart, { passive: false });\n      document.removeEventListener('touchend', handleTouchEnd);\n    }\n  }, [sampler])\n  return noteRef.current\n}\n\nexport default SmallPiano","export default __webpack_public_path__ + \"static/media/1.g3.8f81a3b9.ogg\";","export default __webpack_public_path__ + \"static/media/3.a3.9c12f360.ogg\";","export default __webpack_public_path__ + \"static/media/6.c4.2377fed6.ogg\";","export default __webpack_public_path__ + \"static/media/9.ds4.fc86c751.ogg\";","export default __webpack_public_path__ + \"static/media/12.fs4.d9071cbe.ogg\";","export default __webpack_public_path__ + \"static/media/15.a4.1f51ad50.ogg\";","export default __webpack_public_path__ + \"static/media/18.c5.350a2ba1.ogg\";","export default __webpack_public_path__ + \"static/media/21.ds5.929d4e7b.ogg\";","class KeyInfo {\n    constructor(id, note, color, d) {\n        this.id = id;\n        this.note = note;\n        this.color = color;\n        this.d = d;\n    }\n}\nexport const largeKeys = [\n    new KeyInfo('g1', 'G1', 'white', \"M10.848.265v31.75H1.323c-.794 0-1.058-.265-1.058-1.059V.265z\"),\n    new KeyInfo('a1', 'A1', 'white', \"M10.848.265h10.583v31.75H10.848z\"),\n    new KeyInfo('b1', 'B1', 'white', \"M21.431.265h10.583v31.75H21.431z\"),\n    new KeyInfo('c2', 'C2', 'white', \"M32.015.265h10.583v31.75H32.015z\"),\n    new KeyInfo('d2', 'D2', 'white', \"M42.598.265h10.583v31.75H42.598z\"),\n    new KeyInfo('e2', 'E2', 'white', \"M53.181.265h10.583v31.75H53.181z\"),\n    new KeyInfo('f2', 'F2', 'white', \"M63.765.265h10.583v31.75H63.765z\"),\n    new KeyInfo('g2', 'G2', 'white', \"M74.348.265h10.583v31.75H74.348z\"),\n    new KeyInfo('a2', 'A2', 'white', \"M84.931.265h10.583v31.75H84.931z\"),\n    new KeyInfo('b2', 'B2', 'white', \"M95.515.265h10.583v31.75H95.515z\"),\n    new KeyInfo('c3', 'C3', 'white', \"M106.098.265h10.583v31.75h-10.583z\"),\n    new KeyInfo('d3', 'D3', 'white', \"M116.681.265v31.75h9.525c.794 0 1.059-.265 1.059-1.059V.265z\"),\n    new KeyInfo('gs1', 'G#1', 'black', \"M15.081.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('as1', 'A#1', 'black', \"M25.665.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('cs2', 'C#2', 'black', \"M46.831.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('ds2', 'D#2', 'black', \"M57.415.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('fs2', 'F#2', 'black', \"M78.581.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('gs2', 'G#2', 'black', \"M89.165.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n    new KeyInfo('as2', 'A#2', 'black', \"M99.748.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.587 0-1.059-.44-1.059-.988V.265z\"),\n    new KeyInfo('cs3', 'C#3', 'black', \"M120.915.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"),\n]\nconst data = [\n    ['g1', 'G1', 'white', \"M10.848.265v31.75H1.323c-.794 0-1.058-.265-1.058-1.059V.265z\"],\n    ['a1', 'A1', 'white', \"M10.848.265h10.583v31.75H10.848z\"],\n    ['b1', 'B1', 'white', \"M21.431.265h10.583v31.75H21.431z\"],\n    ['c2', 'C2', 'white', \"M32.015.265h10.583v31.75H32.015z\"],\n    ['d2', 'D2', 'white', \"M42.598.265h10.583v31.75H42.598z\"],\n    ['e2', 'E2', 'white', \"M53.181.265h10.583v31.75H53.181z\"],\n    ['f2', 'F2', 'white', \"M63.765.265h10.583v31.75H63.765z\"],\n    ['g2', 'G2', 'white', \"M74.348.265h10.583v31.75H74.348z\"],\n    ['a2', 'A2', 'white', \"M84.931.265h10.583v31.75H84.931z\"],\n    ['b2', 'B2', 'white', \"M95.515.265h10.583v31.75H95.515z\"],\n    ['c3', 'C3', 'white', \"M106.098.265h10.583v31.75h-10.583z\"],\n    ['d3', 'D3', 'white', \"M116.681.265v31.75h9.525c.794 0 1.059-.265 1.059-1.059V.265z\"],\n    ['gs1', 'G#1', 'black', \"M15.081.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"],\n    ['as1', 'A#1', 'black', \"M25.665.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"],\n    ['cs2', 'C#2', 'black', \"M46.831.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"],\n    ['ds2', 'D#2', 'black', \"M57.415.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"],\n    ['fs2', 'F#2', 'black', \"M78.581.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"],\n    ['gs2', 'G#2', 'black', \"M89.165.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"],\n    ['as2', 'A#2', 'black', \"M99.748.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.587 0-1.059-.44-1.059-.988V.265z\"],\n    ['cs2', 'C#3', 'black', \"M120.915.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z\"],\n]\nexport default data;","import React, { useEffect, useState } from 'react'\nimport { largeKeys } from './data'\nconst translation = {\n  'c': 'G1',\n  'v': 'A1',\n  'b': 'B1',\n  'q': 'C2',\n  'w': 'D2',\n  'e': 'E2',\n  'r': 'F2',\n  't': 'G2',\n  'y': 'A2',\n  'u': 'B2',\n  'i': 'C3',\n  'o': 'D3',\n  'f': 'G#1',\n  'g': 'A#1',\n  '2': 'C#2',\n  '3': 'D#2',\n  '5': 'F#2',\n  '6': 'G#2',\n  '7': 'A#2',\n}\n\nconst LargePiano = ({ sampler }) => {\n  const [clicked, setClicked] = useState('')\n  const activeKeys = useActiveNoteHandler(sampler)\n\n  const createPath = (id, note, color, d) => {\n    return <path\n      key={id}\n      data-note={note}\n      onContextMenu={(e) => e.preventDefault()}\n      className={`${color}-key piano-key ${activeKeys.includes(note) ? 'active' : ''}`} d={d}\n    />\n  }\n  // These two gets highlighted using pseudoclass instead of .active class.\n  useEffect(() => {\n    const handleMouseUp = () => {\n      sampler.triggerRelease(clicked)\n\n    }\n    const handleMouseDown = (e) => {\n      const { note } = e.target.dataset\n      if (!note) return\n      setClicked(note)\n      sampler.triggerAttack(note)\n    }\n\n    // Here instead of in path because I mouse sometimes get released not over the clicked note.\n    window.addEventListener('mousedown', handleMouseDown);\n    window.addEventListener('mouseup', handleMouseUp);\n    return () => {\n      window.removeEventListener('mousedown', handleMouseDown);\n      window.removeEventListener('mouseup', handleMouseUp);\n    }\n  }, [sampler, clicked])\n\n\n\n  return (\n    <div id='piano-large' >\n      <svg id='piano-svg' xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 127.529 32.279\" preserveAspectRatio=\"none\">\n        {largeKeys.map(({ id, note, color, d }) => createPath(id, note, color, d))}\n      </svg>\n    </div>\n  )\n}\n// This returns the pressed notes so the class active can get added to pressed keys. It also plays the notes.\nconst useActiveNoteHandler = (sampler) => {\n  const [, setNotes] = useState([])\n  const noteRef = React.useRef([])\n  useEffect(() => {\n    const handleKeyDown = ({ key, repeat }) => {\n      const note = translation[key]\n      if (!note || repeat || noteRef.current.includes(note)) return;\n      // I have to do it like this. If I use usestate here instead of ref it will remove and add the eventlisteners every time i click. This means if I release two keys at the same time the eventlistener for one of them might get removed by releasing the other key, and the website wont register the release of the key. I only use setNotes to trigger a rerender, it doesn't actually get used for anything else. \n      noteRef.current = [...noteRef.current, note]\n      setNotes(noteRef.current)\n      sampler.triggerAttack(note)\n    }\n    const handleKeyUp = ({ key }) => {\n      const note = translation[key]\n      noteRef.current = noteRef.current.filter(k => k !== note)\n      setNotes(noteRef.current)\n      sampler.triggerRelease(note)\n    }\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [sampler])\n  useEffect(() => {\n    const handleTouchStart = (e) => {\n      e.preventDefault()\n      const { note } = e.target.dataset\n      noteRef.current = [...noteRef.current, note]\n      setNotes(noteRef.current);\n      sampler.triggerAttack(note)\n    }\n\n    const handleTouchEnd = (e) => {\n      const { note } = e.target.dataset\n      noteRef.current = noteRef.current.filter(k => k !== note)\n      setNotes(noteRef.current)\n      sampler.triggerRelease(note)\n    }\n    const piano = document.getElementById('piano-large')\n    // I need to add eventlistener here, instead of inline in element, because I need to set it to passive, so I can prevent default.\n    piano.addEventListener('touchstart', handleTouchStart, { passive: false });\n    document.addEventListener('touchend', handleTouchEnd);\n    return () => {\n      piano.removeEventListener('touchstart', handleTouchStart, { passive: false });\n      document.removeEventListener('touchend', handleTouchEnd);\n    }\n  }, [sampler])\n  return noteRef.current\n}\n\nexport default LargePiano","import React, { useState } from 'react'\nimport { Sampler, Buffer } from 'tone'\nimport SmallPiano from \"./smallPiano/SmallPiano\";\nimport { g3, a3, c4, ds4, fs4, a4, c5, ds5 } from './audio/index'\nimport LargePiano from './largePiano/LargePiano';\nimport { FullScreen, useFullScreenHandle } from \"react-full-screen\";\nconst g3b = new Buffer(g3)\nconst a3b = new Buffer(a3)\nconst c4b = new Buffer(c4)\nconst ds4b = new Buffer(ds4)\nconst fs4b = new Buffer(fs4)\nconst a4b = new Buffer(a4)\nconst c5b = new Buffer(c5)\nconst ds5b = new Buffer(ds5)\nconst Container = ({ largePiano, octaveHigher, children, ...props }) => {\n  const [loaded, setLoaded] = useState(false)\n  const handle = useFullScreenHandle();\n  const sampler = new Sampler({\n    urls: {\n      \"G1\": g3b,\n      \"A1\": a3b,\n      \"C2\": c4b,\n      \"D#2\": ds4b,\n      \"F#2\": fs4b,\n      \"A2\": a4b,\n      \"C3\": c5b,\n      \"D#3\": ds5b,\n    },\n    baseUrl: \"../../assets/audio\",\n    release: 1,\n    onload: () => {\n      setLoaded(true)\n    }\n  }).toDestination();\n\n  const Piano = () => (loaded ?\n    largePiano ?\n      <LargePiano sampler={sampler} />\n      :\n      <SmallPiano sampler={sampler} />\n    : null\n  )\n  const handleClick = () => {\n    handle.enter()\n  }\n\n  return (\n    <div className=\"piano-container\" {...props}>\n      <FullScreen handle={handle}>\n        <Piano />\n      </FullScreen>\n      <button onClick={handleClick}>\n        Enter fullscreen\n      </button>\n    </div>\n  )\n}\n\nexport default Container\n"],"sourceRoot":""}