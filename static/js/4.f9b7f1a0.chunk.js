(this.webpackJsonppianisto=this.webpackJsonppianisto||[]).push([[4],{73:function(e,t,n){"use strict";n.r(t);var c=n(3),i=n(8),r=n(0),a=n.n(r),o=n(72),u=n(59),s=n(4),d=(s.c.div.withConfig({displayName:"piano__Frame",componentId:"sc-5pcnx4-0"})([""]),s.c.div.withConfig({displayName:"piano__Container",componentId:"sc-5pcnx4-1"})(["margin:auto;resize:",";overflow:hidden;width:80%;height:100%;"," svg{width:100%;height:100%;max-height:min(50vw,900px);","}@media screen and (max-width:1200px){width:100%;}"],(function(e){return e.isFullscreen?"none":"both"}),(function(e){return e.isFullscreen&&"width:100% !important; height: 100% !important;"}),(function(e){return e.isFullscreen&&"max-height:100% !important;"}))),l=s.c.path.withConfig({displayName:"piano__WhiteKey",componentId:"sc-5pcnx4-2"})(["fill:white;stroke:black;stroke-width:0.25;&.active{fill:#ccc;}"]),f=s.c.path.withConfig({displayName:"piano__BlackKey",componentId:"sc-5pcnx4-3"})(["fill:black;stroke:black;stroke-width:0.25;&.active{fill:#333;stroke:#333;}"]),v=s.c.text.withConfig({displayName:"piano__Text",componentId:"sc-5pcnx4-4"})(["font-family:monospace;font-size:0.9em;user-select:none;pointer-events:none;"]),h=Object(s.c)(v).withConfig({displayName:"piano__WhiteText",componentId:"sc-5pcnx4-5"})(["fill:black;"]),b=Object(s.c)(v).withConfig({displayName:"piano__BlackText",componentId:"sc-5pcnx4-6"})(["fill:white;"]),p=n(1),j=function(e){var t=e.isFullscreen,n=e.children,r=Object(i.a)(e,["isFullscreen","children"]);return Object(p.jsx)(d,Object(c.a)(Object(c.a)({isFullscreen:t},r),{},{children:n}))};j.Svg=function(e){var t=e.width,n=e.children,r=Object(i.a)(e,["width","children"]);return Object(p.jsx)("svg",Object(c.a)(Object(c.a)({version:"1.1",viewBox:"-1 -1 ".concat(t+2," 112"),id:"pianoSvg"},r),{},{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:n}))},j.WhiteKey=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(p.jsx)(l,Object(c.a)(Object(c.a)({},n),{},{children:t}))},j.BlackKey=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(p.jsx)(f,Object(c.a)(Object(c.a)({},n),{},{children:t}))},j.WhiteText=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(p.jsx)(h,Object(c.a)(Object(c.a)({},n),{},{children:t}))},j.BlackText=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(p.jsx)(b,Object(c.a)(Object(c.a)({},n),{},{children:t}))};var g=j,m=n(13),O=["C","D","E","F","G","A","B"];function w(e,t){for(var n=function(e,t){var n=e.split(""),c=Object(m.a)(n,2),i=c[0],r=c[1],a=t.split(""),o=Object(m.a)(a,2),u=o[0],s=o[1],d=O.indexOf(i),l=O.indexOf(u);return 7*(s-r)+(l-d+1)}(e,t),c={C:!0,D:!0,E:!1,F:!0,G:!0,A:!0,B:!1},i=e.split(""),r=Object(m.a)(i,2),a=r[0],o=r[1],u=O.indexOf(a),s=[],d=0;d<n;d++){0===u&&d>0&&o++;var l=d!==n-1&&c[O[u]];s.push({note:O[u]+o,hasNeighbour:l}),u=u>5?0:u+1}return s}var x=n(71),y=n.p+"static/media/1.g3.8f81a3b9.ogg",k=n.p+"static/media/3.a3.9c12f360.ogg",E=n.p+"static/media/6.c4.2377fed6.ogg",L=n.p+"static/media/9.ds4.fc86c751.ogg",N=n.p+"static/media/12.fs4.d9071cbe.ogg",F=n.p+"static/media/15.a4.1f51ad50.ogg",C=n.p+"static/media/18.c5.350a2ba1.ogg",_=n.p+"static/media/21.ds5.929d4e7b.ogg",T=n.p+"static/media/24.fs5.1fc5847e.ogg",B=n.p+"static/media/27.a5.a37b4bea.ogg",A=n.p+"static/media/29.c6.72cf6e45.ogg",D=n.p+"static/media/30.ds6.2a408d1c.ogg",I=n.p+"static/media/31.fs6.23bd57c5.ogg",S=(n.p,new x.a(y)),K=new x.a(k),R=new x.a(E),W=new x.a(L),z=new x.a(N),G=new x.a(F),J=new x.a(C),P=new x.a(_),U=new x.a(T),X=new x.a(B),Y=new x.a(A),q=new x.a(D),H=new x.a(I);var M=n(30),Q=n(60),V=function(e,t,n){var c=Object(r.useState)([]),i=Object(m.a)(c,2)[1],o=a.a.useRef([]),s=a.a.useRef([]),d=Object(M.a)(t,n);return Object(r.useEffect)((function(){var t=function(t){"Slash"===t.code&&t.preventDefault();var n=d.find((function(e){return e.keycode===t.code}));if(void 0!==n){var c=n.note;!c||t.repeat||o.current.includes(c)||(o.current=[].concat(Object(u.a)(o.current),[c]),i(o.current),e.triggerAttack(c))}},n=function(t){var n=d.find((function(e){return e.keycode===t.code}));if(void 0!==n){var c=n.note;o.current=o.current.filter((function(e){return e!==c})),i(o.current),e.triggerRelease(c)}};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n)}}),[e,d]),Object(r.useEffect)((function(){function t(e,t){return{note:t,identifier:e.identifier}}var n=function(n){n.preventDefault();var c=n.target.dataset.note,r=t(n.changedTouches[0],c);s.current=[].concat(Object(u.a)(s.current),[r]),i(s.current),null!=c&&e.triggerAttack(c)},c=function(n){s.current.length>0&&n.preventDefault();var c,a=Object(Q.a)(n.changedTouches);try{var o=function(){var n=c.value,a=r(n);if(void 0===a)return{v:void 0};var o=t(n,a.note);s.current=s.current.filter((function(e){return e.note!==o.note})),i.apply(void 0,Object(u.a)(s.current)),e.triggerRelease(o.note)};for(a.s();!(c=a.n()).done;){var d=o();if("object"===typeof d)return d.v}}catch(l){a.e(l)}finally{a.f()}},r=function(e){var t,n=function(e){return{x:e.clientX,y:e.clientY}}(e),c=n.x,i=n.y;return null===(t=document.elementFromPoint(c,i))||void 0===t?void 0:t.dataset},a=function(n){var c,a=Object(Q.a)(n.changedTouches);try{var o=function(){var n=c.value,a=r(n);if(void 0===a)return{v:void 0};var o=t(n,a.note),d=s.current.find((function(e){return e.identifier===o.identifier}))||{note:void 0,identifier:o.identifier};o.note!==d.note&&(s.current=s.current.filter((function(e){return e.note!==d.note})),s.current=[].concat(Object(u.a)(s.current),[o]),null!=o.note&&e.triggerAttack(o.note),null!=d.note&&e.triggerRelease(d.note),i(s.current))};for(a.s();!(c=a.n()).done;){var d=o();if("object"===typeof d)return d.v}}catch(l){a.e(l)}finally{a.f()}},o=document.getElementById("pianoSvg");return o.addEventListener("touchstart",n,{passive:!1}),document.addEventListener("touchend",c),document.addEventListener("touchmove",a,{passive:!1}),function(){o.removeEventListener("touchstart",n,{passive:!1}),document.removeEventListener("touchend",c),document.removeEventListener("touchmove",a,{passive:!1})}}),[e]),[].concat(Object(u.a)(s.current.map((function(e){return e.note}))),Object(u.a)(o.current))};var Z=function(e){var t=e.options,n=t.low,a=t.high,o=t.showNotenames,s=t.showKeybindings,d=t.isFullscreen,l=e.sampler,f=Object(i.a)(e,["options","sampler"]),v=function(e,t){var n=w(e,t);return n.map((function(e,t){var c=30*t;return 0===t?{hasNeighbour:e.hasNeighbour,note:e.note,d:"m 0 0 v 107 a 3 3 0 0 0 3 3 h 27 v -110 z",x:c}:t===n.length-1?{hasNeighbour:e.hasNeighbour,note:e.note,d:"m ".concat(c," 0 v 110 h 27 a 3 3 0 0 0 3 -3 v -107 z "),x:c}:{hasNeighbour:e.hasNeighbour,note:e.note,d:"m ".concat(c," 0 v 110 h 30 v -110 z"),x:c}}))}(n,a),h=function(e,t,n){return e.map((function(e,t){var n=e.note.substr(0,1)+"#"+e.note.substr(1),c=18+30*t;return e.hasNeighbour?{note:n,d:"m ".concat(c," 0 v 63 a 2 2 0 0 0 2 2 h 18 a 2 2 0 0 0 2 -2 v -63 z"),x:c}:null})).filter((function(e){return null!==e}))}(v),b=Object(M.a)(n,a),j=V(l,n,a),O=[function(e){var t=Object(r.useState)(null),n=Object(m.a)(t,2),c=n[0],i=n[1],a=Object(r.useState)(null),o=Object(m.a)(a,2),u=o[0],s=o[1];return Object(r.useEffect)((function(){var e=function(e){var t=e.target.dataset.note;s(t),i(null)},t=function(e){if(null!==c&&void 0!==e.target.dataset){var t=e.target.dataset.note,n=c;t!==n&&(i(t),s(n))}},n=function(e){var t=e.target.dataset.note;i(t),s(null)};return window.addEventListener("mousedown",n),window.addEventListener("mousemove",t),window.addEventListener("mouseup",e),function(){window.removeEventListener("mousedown",n),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)}}),[e,c]),Object(r.useEffect)((function(){null!=c&&e.triggerAttack(c)}),[e,c]),Object(r.useEffect)((function(){null!=u&&e.triggerRelease(u)}),[e,u]),c}(l)].concat(Object(u.a)(j));return Object(p.jsx)(g,Object(c.a)(Object(c.a)({isFullscreen:d},f),{},{children:Object(p.jsxs)(g.Svg,{width:30*v.length,children:[v.map((function(e){return Object(p.jsx)(g.WhiteKey,{"data-note":e.note,d:e.d,className:O.includes(e.note)?"active":null},e.note)})),h.map((function(e){return Object(p.jsx)(g.BlackKey,{"data-note":e.note,d:e.d,className:O.includes(e.note)?"active":null},e.note)})),o&&Object(p.jsxs)("g",{children:[v.map((function(e){return Object(p.jsx)(g.WhiteText,{x:e.x+12,y:"105",children:e.note.slice(0,-1)},e.note)})),h.map((function(e){return Object(p.jsx)(g.BlackText,{x:e.x+3,y:"60",children:e.note.slice(0,-1)},e.note)}))]}),s&&Object(p.jsxs)("g",{children:[v.map((function(e){var t=b.find((function(t){return e.note===t.note}));return Object(p.jsx)(g.WhiteText,{x:e.x+12,y:"90",children:t.key},e.note)})),h.map((function(e){var t=b.find((function(t){return e.note===t.note}));return Object(p.jsx)(g.BlackText,{x:e.x+7,y:"45",children:t.key},e.note)}))]})]})}))};t.default=function(e){var t,n=e.options,r=e.setLoading,a=Object(i.a)(e,["options","setLoading"]),u=Object(o.b)(),s=(t=function(){return r(!1)},new x.b({urls:{G1:S,A1:K,C2:R,"D#2":W,"F#2":z,A2:G,C3:J,"D#3":P,"F#3":U,A3:X,C4:Y,"D#4":q,"F#4":H},baseUrl:"../../assets/audio",release:1,onload:function(){t()}}).toDestination());return Object(p.jsxs)("div",Object(c.a)(Object(c.a)({},a),{},{children:[Object(p.jsx)(o.a,{handle:u,children:Object(p.jsx)(Z,{sampler:s,options:Object(c.a)(Object(c.a)({},n),{},{isFullscreen:u.active})})}),Object(p.jsx)("button",{onClick:function(){u.enter()},children:"Enter fullscreen"})]}))}}}]);
//# sourceMappingURL=4.f9b7f1a0.chunk.js.map