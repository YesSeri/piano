(this.webpackJsonppianisto=this.webpackJsonppianisto||[]).push([[4],{73:function(e,t,n){"use strict";n.r(t);var c=n(3),i=n(7),r=n(0),a=n.n(r),o=n(72),u=n(59),s=n(4),d=(s.c.div.withConfig({displayName:"piano__Frame",componentId:"sc-5pcnx4-0"})([""]),s.c.div.withConfig({displayName:"piano__Container",componentId:"sc-5pcnx4-1"})(["margin:auto;resize:",";overflow:hidden;width:80%;height:100%;"," svg{width:100%;height:100%;max-height:min(50vw,600px);","}@media screen and (max-width:1200px){width:100%;}"],(function(e){return e.isFullscreen?"none":"both"}),(function(e){return e.isFullscreen&&"width:100% !important; height: 100% !important;"}),(function(e){return e.isFullscreen&&"max-height:100% !important;"}))),l=s.c.path.withConfig({displayName:"piano__WhiteKey",componentId:"sc-5pcnx4-2"})(["fill:white;stroke:black;stroke-width:0.25;&.active{fill:#ccc;}"]),f=s.c.path.withConfig({displayName:"piano__BlackKey",componentId:"sc-5pcnx4-3"})(["fill:black;stroke:black;stroke-width:0.25;&.active{fill:#333;stroke:#333;}"]),v=s.c.text.withConfig({displayName:"piano__Text",componentId:"sc-5pcnx4-4"})(["font-family:monospace;font-size:0.9em;user-select:none;pointer-events:none;"]),h=Object(s.c)(v).withConfig({displayName:"piano__WhiteText",componentId:"sc-5pcnx4-5"})(["fill:black;"]),b=Object(s.c)(v).withConfig({displayName:"piano__BlackText",componentId:"sc-5pcnx4-6"})(["fill:white;"]),p=n(1),j=function(e){var t=e.isFullscreen,n=e.children,r=Object(i.a)(e,["isFullscreen","children"]);return Object(p.jsx)(d,Object(c.a)(Object(c.a)({isFullscreen:t},r),{},{children:n}))};j.Svg=function(e){var t=e.width,n=e.children,r=Object(i.a)(e,["width","children"]);return Object(p.jsx)("svg",Object(c.a)(Object(c.a)({version:"1.1",viewBox:"-1 -1 ".concat(t+2," 112"),id:"pianoSvg"},r),{},{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:n}))},j.WhiteKey=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(p.jsx)(l,Object(c.a)(Object(c.a)({},n),{},{children:t}))},j.BlackKey=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(p.jsx)(f,Object(c.a)(Object(c.a)({},n),{},{children:t}))},j.WhiteText=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(p.jsx)(h,Object(c.a)(Object(c.a)({},n),{},{children:t}))},j.BlackText=function(e){var t=e.children,n=Object(i.a)(e,["children"]);return Object(p.jsx)(b,Object(c.a)(Object(c.a)({},n),{},{children:t}))};var g=j,m=n(13),O=["C","D","E","F","G","A","B"];function w(e,t){for(var n=function(e,t){var n=e.split(""),c=Object(m.a)(n,2),i=c[0],r=c[1],a=t.split(""),o=Object(m.a)(a,2),u=o[0],s=o[1],d=O.indexOf(i),l=O.indexOf(u);return 7*(s-r)+(l-d+1)}(e,t),c={C:!0,D:!0,E:!1,F:!0,G:!0,A:!0,B:!1},i=e.split(""),r=Object(m.a)(i,2),a=r[0],o=r[1],u=O.indexOf(a),s=[],d=0;d<n;d++){0===u&&d>0&&o++;var l=d!==n-1&&c[O[u]];s.push({note:O[u]+o,hasNeighbour:l}),u=u>5?0:u+1}return s}var x=n(71),y=n.p+"static/media/1.g3.8f81a3b9.ogg",k=n.p+"static/media/3.a3.9c12f360.ogg",E=n.p+"static/media/6.c4.2377fed6.ogg",L=n.p+"static/media/9.ds4.fc86c751.ogg",N=n.p+"static/media/12.fs4.d9071cbe.ogg",F=n.p+"static/media/15.a4.1f51ad50.ogg",C=n.p+"static/media/18.c5.350a2ba1.ogg",_=n.p+"static/media/21.ds5.929d4e7b.ogg",T=n.p+"static/media/24.fs5.1fc5847e.ogg",B=n.p+"static/media/27.a5.a37b4bea.ogg",A=n.p+"static/media/29.c6.72cf6e45.ogg",D=n.p+"static/media/30.ds6.2a408d1c.ogg",I=n.p+"static/media/31.fs6.23bd57c5.ogg",S=(n.p,new x.a(y)),K=new x.a(k),R=new x.a(E),W=new x.a(L),z=new x.a(N),G=new x.a(F),J=new x.a(C),P=new x.a(_),U=new x.a(T),X=new x.a(B),Y=new x.a(A),q=new x.a(D),H=new x.a(I);var M=n(30),Q=n(60),V=function(e,t,n,c){var i=Object(r.useState)([]),o=Object(m.a)(i,2)[1],s=a.a.useRef([]),d=a.a.useRef([]),l=Object(M.a)(t,n);return Object(r.useEffect)((function(){var t=function(t){"Slash"===t.code&&t.preventDefault();var n=l.find((function(e){return e.keycode===t.code}));if(void 0!==n){var c=n.note;!c||t.repeat||s.current.includes(c)||(s.current=[].concat(Object(u.a)(s.current),[c]),o(s.current),e.triggerAttack(c))}},n=function(t){var n=l.find((function(e){return e.keycode===t.code}));if(void 0!==n){var c=n.note;s.current=s.current.filter((function(e){return e!==c})),o(s.current),e.triggerRelease(c)}};return c||(window.addEventListener("keydown",t),window.addEventListener("keyup",n)),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n)}}),[e,l,c]),Object(r.useEffect)((function(){function t(e,t){return{note:t,identifier:e.identifier}}var n=function(n){n.preventDefault();var c=n.target.dataset.note,i=t(n.changedTouches[0],c);d.current=[].concat(Object(u.a)(d.current),[i]),o(d.current),null!=c&&e.triggerAttack(c)},i=function(n){d.current.length>0&&n.preventDefault();var c,i=Object(Q.a)(n.changedTouches);try{var a=function(){var n=c.value,i=r(n);if(void 0===i)return{v:void 0};var a=t(n,i.note);d.current=d.current.filter((function(e){return e.note!==a.note})),o.apply(void 0,Object(u.a)(d.current)),e.triggerRelease(a.note)};for(i.s();!(c=i.n()).done;){var s=a();if("object"===typeof s)return s.v}}catch(l){i.e(l)}finally{i.f()}},r=function(e){var t,n=function(e){return{x:e.clientX,y:e.clientY}}(e),c=n.x,i=n.y;return null===(t=document.elementFromPoint(c,i))||void 0===t?void 0:t.dataset},a=function(n){var c,i=Object(Q.a)(n.changedTouches);try{var a=function(){var n=c.value,i=r(n);if(void 0===i)return{v:void 0};var a=t(n,i.note),s=d.current.find((function(e){return e.identifier===a.identifier}))||{note:void 0,identifier:a.identifier};a.note!==s.note&&(d.current=d.current.filter((function(e){return e.note!==s.note})),d.current=[].concat(Object(u.a)(d.current),[a]),null!=a.note&&e.triggerAttack(a.note),null!=s.note&&e.triggerRelease(s.note),o(d.current))};for(i.s();!(c=i.n()).done;){var s=a();if("object"===typeof s)return s.v}}catch(l){i.e(l)}finally{i.f()}},s=document.getElementById("pianoSvg");return c||(s.addEventListener("touchstart",n,{passive:!1}),document.addEventListener("touchend",i),document.addEventListener("touchmove",a,{passive:!1})),function(){s.removeEventListener("touchstart",n,{passive:!1}),document.removeEventListener("touchend",i),document.removeEventListener("touchmove",a,{passive:!1})}}),[e,c]),[].concat(Object(u.a)(d.current.map((function(e){return e.note}))),Object(u.a)(s.current))};var Z=function(e){var t=e.options,n=t.low,a=t.high,o=t.showNotenames,s=t.showKeybindings,d=t.isFullscreen,l=t.loading,f=e.sampler,v=Object(i.a)(e,["options","sampler"]),h=function(e,t){var n=w(e,t);return n.map((function(e,t){var c=30*t;return 0===t?{hasNeighbour:e.hasNeighbour,note:e.note,d:"m 0 0 v 107 a 3 3 0 0 0 3 3 h 27 v -110 z",x:c}:t===n.length-1?{hasNeighbour:e.hasNeighbour,note:e.note,d:"m ".concat(c," 0 v 110 h 27 a 3 3 0 0 0 3 -3 v -107 z "),x:c}:{hasNeighbour:e.hasNeighbour,note:e.note,d:"m ".concat(c," 0 v 110 h 30 v -110 z"),x:c}}))}(n,a),b=function(e,t,n){return e.map((function(e,t){var n=e.note.substr(0,1)+"#"+e.note.substr(1),c=18+30*t;return e.hasNeighbour?{note:n,d:"m ".concat(c," 0 v 63 a 2 2 0 0 0 2 2 h 18 a 2 2 0 0 0 2 -2 v -63 z"),x:c}:null})).filter((function(e){return null!==e}))}(h),j=Object(M.a)(n,a),O=V(f,n,a,l),x=[function(e,t){var n=Object(r.useState)(null),c=Object(m.a)(n,2),i=c[0],a=c[1],o=Object(r.useState)(null),u=Object(m.a)(o,2),s=u[0],d=u[1];return Object(r.useEffect)((function(){var e=function(e){var t=e.target.dataset.note;d(t),a(null)},n=function(e){if(null!==i&&void 0!==e.target.dataset){var t=e.target.dataset.note,n=i;t!==n&&(a(t),d(n))}},c=function(e){var t=e.target.dataset.note;a(t),d(null)};return t||(window.addEventListener("mousedown",c),window.addEventListener("mousemove",n),window.addEventListener("mouseup",e)),function(){window.removeEventListener("mousedown",c),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",e)}}),[e,i,t]),Object(r.useEffect)((function(){null!=i&&e.triggerAttack(i)}),[e,i]),Object(r.useEffect)((function(){null!=s&&e.triggerRelease(s)}),[e,s]),i}(f,l)].concat(Object(u.a)(O));return Object(p.jsx)(g,Object(c.a)(Object(c.a)({isFullscreen:d},v),{},{children:Object(p.jsxs)(g.Svg,{width:30*h.length,children:[h.map((function(e){return Object(p.jsx)(g.WhiteKey,{"data-note":e.note,d:e.d,className:x.includes(e.note)?"active":null},e.note)})),b.map((function(e){return Object(p.jsx)(g.BlackKey,{"data-note":e.note,d:e.d,className:x.includes(e.note)?"active":null},e.note)})),o&&Object(p.jsxs)("g",{children:[h.map((function(e){return Object(p.jsx)(g.WhiteText,{x:e.x+12,y:"105",children:e.note.slice(0,-1)},e.note)})),b.map((function(e){return Object(p.jsx)(g.BlackText,{x:e.x+3,y:"60",children:e.note.slice(0,-1)},e.note)}))]}),s&&Object(p.jsxs)("g",{children:[h.map((function(e){var t=j.find((function(t){return e.note===t.note}));return Object(p.jsx)(g.WhiteText,{x:e.x+12,y:"90",children:t.key},e.note)})),b.map((function(e){var t=j.find((function(t){return e.note===t.note}));return Object(p.jsx)(g.BlackText,{x:e.x+7,y:"45",children:t.key},e.note)}))]})]})}))};t.default=function(e){var t,n=e.options,r=e.setLoading,a=Object(i.a)(e,["options","setLoading"]),u=Object(o.b)(),s=(t=function(){return r(!1)},new x.b({urls:{G1:S,A1:K,C2:R,"D#2":W,"F#2":z,A2:G,C3:J,"D#3":P,"F#3":U,A3:X,C4:Y,"D#4":q,"F#4":H},baseUrl:"../../assets/audio",release:1,onload:function(){t()}}).toDestination());return Object(p.jsxs)("div",Object(c.a)(Object(c.a)({},a),{},{children:[Object(p.jsx)(o.a,{handle:u,children:Object(p.jsx)(Z,{sampler:s,options:Object(c.a)(Object(c.a)({},n),{},{isFullscreen:u.active})})}),Object(p.jsx)("button",{onClick:function(){u.enter()},children:"Enter fullscreen"})]}))}}}]);
//# sourceMappingURL=4.95cdacaf.chunk.js.map