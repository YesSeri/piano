(this.webpackJsonppianisto=this.webpackJsonppianisto||[]).push([[4],{53:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(10),a=n(5),i=n(1),o=n.n(i),u=n(51),s=n(37),v=function e(t,n,r,c){Object(s.a)(this,e),this.id=t,this.note=n,this.color=r,this.d=c},l=(new v("c2-small","C2","white","M10.848.265v31.75H1.323a1.056 1.056 0 01-1.058-1.059V.265h10.583z"),new v("d2-small","D2","white","M10.848.265h10.583v31.75H10.848z"),new v("e2-small","E2","white","M21.431.265h10.583v31.75H21.431z"),new v("f2-small","F2","white","M32.015.265h10.583v31.75H32.015z"),new v("g2-small","G2","white","M42.598.265h10.583v31.75H42.598z"),new v("a2-small","A2","white","M53.181.265h10.583v31.75H53.181z"),new v("b2-small","B2","white","M63.765.265h10.583v31.75H63.765z"),new v("c3-small","C3","white","M74.348.265v31.75h9.525c.586 0 1.058-.472 1.058-1.059V.265H74.348z"),new v("cs2-small","C#2","black","M15.081.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"),new v("ds2-small","D#2","black","M25.665.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"),new v("fs2-small","F#2","black","M46.831.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"),new v("gs2-small","G#2","black","M57.415.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"),new v("as2-small","A#2","black","M67.998.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.587 0-1.059-.44-1.059-.988V.265z"),n(39)),d=n(40),h=function(e,t){var n=Object(i.useState)([]),r=Object(c.a)(n,2)[1],a=o.a.useRef([]),u=o.a.useRef([]);return Object(i.useEffect)((function(){var n=function(n){var c=n.key,i=n.repeat,o=t[c];!o||i||a.current.includes(o)||(a.current=[].concat(Object(d.a)(a.current),[o]),r(a.current),e.triggerAttack(o))},c=function(n){var c=n.key,i=t[c];a.current=a.current.filter((function(e){return e!==i})),r(a.current),e.triggerRelease(i)};return window.addEventListener("keydown",n),window.addEventListener("keyup",c),function(){window.removeEventListener("keydown",n),window.removeEventListener("keyup",c)}}),[e,t]),Object(i.useEffect)((function(){function t(e,t){return{note:t,identifier:e.identifier}}var n=function(n){n.preventDefault();var c=n.target.dataset.note,a=t(n.changedTouches[0],c);u.current=[].concat(Object(d.a)(u.current),[a]),r(u.current),e.triggerAttack(c)},c=function(n){u.current.length>0&&n.preventDefault();var c,i=Object(l.a)(n.changedTouches);try{var o=function(){var n=c.value,i=a(n);if(void 0===i)return{v:void 0};var o=t(n,i.note);u.current=u.current.filter((function(e){return e.note!==o.note})),r.apply(void 0,Object(d.a)(u.current)),e.triggerRelease(o.note)};for(i.s();!(c=i.n()).done;){var s=o();if("object"===typeof s)return s.v}}catch(v){i.e(v)}finally{i.f()}},a=function(e){var t,n=function(e){return{x:e.clientX,y:e.clientY}}(e),r=n.x,c=n.y;return null===(t=document.elementFromPoint(r,c))||void 0===t?void 0:t.dataset},i=function(n){var c,i=Object(l.a)(n.changedTouches);try{var o=function(){var n=c.value,i=a(n);if(void 0===i)return{v:void 0};var o=t(n,i.note),s=u.current.find((function(e){return e.identifier===o.identifier}))||{note:void 0,identifier:o.identifier};o.note!==s.note&&(u.current=u.current.filter((function(e){return e.note!==s.note})),u.current=[].concat(Object(d.a)(u.current),[o]),null!=o.note&&e.triggerAttack(o.note),null!=s.note&&e.triggerRelease(s.note),r(u.current))};for(i.s();!(c=i.n()).done;){var s=o();if("object"===typeof s)return s.v}}catch(v){i.e(v)}finally{i.f()}},o=function(e){e.preventDefault()},s=document.getElementsByClassName("piano")[0];return s.addEventListener("touchstart",n,{passive:!1}),document.addEventListener("touchend",c),document.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchmove",o,{passive:!1}),function(){s.removeEventListener("touchstart",n,{passive:!1}),document.removeEventListener("touchend",c),document.removeEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchmove",o,{passive:!1})}}),[e]),[].concat(Object(d.a)(u.current.map((function(e){return e.note}))),Object(d.a)(a.current))};function f(e){var t=Object(i.useState)(null),n=Object(c.a)(t,2)[1],r=Object(i.useState)(null),a=Object(c.a)(r,2)[1],u=o.a.useRef(null),s=o.a.useRef(null),v=o.a.useRef(!1);return Object(i.useEffect)((function(){var e=function(e){if(v.current=!1,void 0!==e.target.dataset){var t=e.target.dataset.note;u.current=null,s.current=t,a(t),n(null)}},t=function(e){if(!0===v.current){if(void 0===e.target.dataset)return;var t=e.target.dataset.note,r=u.current;t!==r&&(u.current=t,s.current=r,n(t),a(r))}},r=function(e){v.current=!0;var t=e.target.dataset.note;t&&(u.current=t,s.current=null,n(t),a(null))};return window.addEventListener("mousedown",r),window.addEventListener("mousemove",t),window.addEventListener("mouseup",e),function(){window.removeEventListener("mousedown",r),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)}}),[e]),[u.current,s.current]}var w=n(0),b=n.p+"static/media/1.g3.8f81a3b9.ogg",m=n.p+"static/media/3.a3.9c12f360.ogg",g=n.p+"static/media/6.c4.2377fed6.ogg",p=n.p+"static/media/9.ds4.fc86c751.ogg",j=n.p+"static/media/12.fs4.d9071cbe.ogg",O=n.p+"static/media/15.a4.1f51ad50.ogg",z=n.p+"static/media/18.c5.350a2ba1.ogg",M=n.p+"static/media/21.ds5.929d4e7b.ogg",E=n(52),k={c:"G1",v:"A1",b:"B1",q:"C2",w:"D2",e:"E2",r:"F2",t:"G2",y:"A2",u:"B2",i:"C3",o:"D3",f:"G#1",g:"A#1",2:"C#2",3:"D#2",5:"F#2",6:"G#2",7:"A#2"},L=[["g1","G1","white","M10.848.265v31.75H1.323c-.794 0-1.058-.265-1.058-1.059V.265z"],["a1","A1","white","M10.848.265h10.583v31.75H10.848z"],["b1","B1","white","M21.431.265h10.583v31.75H21.431z"],["c2","C2","white","M32.015.265h10.583v31.75H32.015z"],["d2","D2","white","M42.598.265h10.583v31.75H42.598z"],["e2","E2","white","M53.181.265h10.583v31.75H53.181z"],["f2","F2","white","M63.765.265h10.583v31.75H63.765z"],["g2","G2","white","M74.348.265h10.583v31.75H74.348z"],["a2","A2","white","M84.931.265h10.583v31.75H84.931z"],["b2","B2","white","M95.515.265h10.583v31.75H95.515z"],["c3","C3","white","M106.098.265h10.583v31.75h-10.583z"],["d3","D3","white","M116.681.265v31.75h9.525c.794 0 1.059-.265 1.059-1.059V.265z"],["gs1","G#1","black","M15.081.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["as1","A#1","black","M25.665.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["cs2","C#2","black","M46.831.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["ds2","D#2","black","M57.415.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["fs2","F#2","black","M78.581.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["gs2","G#2","black","M89.165.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"],["as2","A#2","black","M99.748.265v16.8c0 .547-.472.988-1.058.988h-6.35c-.587 0-1.059-.44-1.059-.988V.265z"],["cs3","C#3","black","M120.915.265v16.8c0 .547-.472.988-1.059.988h-6.35c-.586 0-1.058-.44-1.058-.988V.265z"]],y=(L.map((function(e){return new v(e[0],e[1],e[2],e[3])})),["C","D","E","F","G","A","B"]);var A=function(e){var t=e.sampler,n=e.low,r=e.high,a=f(),o=Object(c.a)(a,2),u=o[0],s=o[1],v=h(t,k),l=function(e,t){for(var n=function(e,t){var n=e.split(""),r=Object(c.a)(n,2),a=r[0],i=r[1],o=t.split(""),u=Object(c.a)(o,2),s=u[0],v=u[1],l=y.indexOf(a),d=y.indexOf(s);return 7*(v-i)+(d-l+1)}(e,t),r={C:!0,D:!0,E:!1,F:!0,G:!0,A:!0,B:!1},a=e.split(""),i=Object(c.a)(a,2),o=i[0],u=i[1],s=y.indexOf(o),v=[],l=0;l<n;l++){0===s&&l>0&&u++;var d=r[y[s]];v.push({note:y[s]+u,hasNeighbour:d}),s=s>5?0:s+1}return v}(n,r);function d(e,t,n,r){return Object(w.jsx)("path",{id:e,"data-note":t,className:"".concat(n,"-key piano-key ").concat(v.includes(t)||u===t?"active":""),d:r,onContextMenu:function(e){return e.preventDefault()}},e)}return Object(i.useEffect)((function(){null!=u&&t.triggerAttack(u)}),[t,u]),Object(i.useEffect)((function(){null!=s&&t.triggerRelease(s)}),[t,s]),Object(w.jsxs)("svg",{version:"1.1",baseProfile:"full",className:"piano",viewBox:"-1 -1 ".concat(30*l.length+2," 112"),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[l.map((function(e,t){var n=e.note.toLowerCase();return 0===t?d(n,e.note,"white","m 0 0 v 107 a 3 3 0 0 0 3 3 h 27 v -110 z"):t===l.length-1?d(n,e.note,"white","m ".concat(30*t," 0 v 110 h 27 a 3 3 0 0 0 3 -3 v -107 z ")):d(n,e.note,"white","m ".concat(30*t," 0 v 110 h 30 v -110 z"))})),l.map((function(e,t){var n=(e.note.substr(0,1)+"s"+e.note.substr(1)).toLowerCase(),r=e.note.substr(0,1)+"#"+e.note.substr(1);return t===l.length-1?null:e.hasNeighbour?d(n,r,"black","m ".concat(18+30*t," 0 v 63 a 2 2 0 0 0 2 2 h 18 a 2 2 0 0 0 2 -2 v -63 z")):null}))]})},C=new u.a(b),H=new u.a(m),D=new u.a(g),V=new u.a(p),x=new u.a(j),G=new u.a(O),F=new u.a(z),R=new u.a(M);t.default=function(e){var t=e.high,n=e.low,o=(e.children,Object(a.a)(e,["high","low","children"])),s=Object(i.useState)(!1),v=Object(c.a)(s,2),l=v[0],d=v[1],h=Object(E.b)(),f=new u.b({urls:{G1:C,A1:H,C2:D,"D#2":V,"F#2":x,A2:G,C3:F,"D#3":R},baseUrl:"../../assets/audio",release:1,onload:function(){d(!0)}}).toDestination();return Object(w.jsxs)("div",Object(r.a)(Object(r.a)({className:"piano-container"},o),{},{children:[Object(w.jsx)(E.a,{handle:h,children:l?Object(w.jsx)(A,{sampler:f,low:n,high:t}):null}),Object(w.jsx)("button",{id:"fullscreen-btn",onClick:function(){h.enter()},children:"Enter fullscreen"})]}))}}}]);
//# sourceMappingURL=4.3036ca32.chunk.js.map