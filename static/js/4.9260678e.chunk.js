(this.webpackJsonppianisto=this.webpackJsonppianisto||[]).push([[4],{52:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(9),c=n(5),i=n(1),o=n.n(i),u=n(50),s=n.p+"static/media/1.g3.8f81a3b9.ogg",d=n.p+"static/media/3.a3.9c12f360.ogg",v=n.p+"static/media/6.c4.2377fed6.ogg",f=n.p+"static/media/9.ds4.fc86c751.ogg",l=n.p+"static/media/12.fs4.d9071cbe.ogg",g=n.p+"static/media/15.a4.1f51ad50.ogg",b=n.p+"static/media/18.c5.350a2ba1.ogg",m=n.p+"static/media/21.ds5.929d4e7b.ogg",p=n.p+"static/media/24.fs5.1fc5847e.ogg",h=n.p+"static/media/27.a5.a37b4bea.ogg",w=n.p+"static/media/29.c6.72cf6e45.ogg",j=n.p+"static/media/30.ds6.2a408d1c.ogg",y=n.p+"static/media/31.fs6.23bd57c5.ogg",O=(n.p,n(51)),E=n(38),D=n(39),K={KeyZ:"G1",KeyX:"A1",KeyC:"B1",KeyV:"C2",KeyB:"D2",KeyN:"E2",KeyM:"F2",Comma:"G2",Period:"A2",Slash:"B2",KeyQ:"C3",KeyW:"D3",KeyE:"E3",KeyR:"F3",KeyT:"G3",KeyY:"A3",KeyU:"B3",KeyI:"C4",KeyO:"D4",KeyP:"E4",BracketLeft:"E4",BracketRight:"E4",KeyS:"G#1",KeyD:"A#1",KeyG:"C#2",KeyH:"D#2",KeyK:"F#2",KeyL:"G#2",Semicolon:"A#2",Digit2:"C#3",Digit3:"D#3",Digit5:"F#3",Digit6:"G#3",Digit7:"A#3",Digit9:"C#4",Digit0:"D#4"},L=function(e){var t=Object(i.useState)([]),n=Object(a.a)(t,2)[1],r=o.a.useRef([]),c=o.a.useRef([]);return Object(i.useEffect)((function(){var t=function(t){"Slash"===t.code&&t.preventDefault();var a=K[t.code];!a||t.repeat||r.current.includes(a)||(r.current=[].concat(Object(D.a)(r.current),[a]),n(r.current),e.triggerAttack(a))},a=function(t){var a=t.code,c=K[a];r.current=r.current.filter((function(e){return e!==c})),n(r.current),e.triggerRelease(c)};return window.addEventListener("keydown",t),window.addEventListener("keyup",a),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",a)}}),[e]),Object(i.useEffect)((function(){function t(e,t){return{note:t,identifier:e.identifier}}var r=function(r){r.preventDefault();var a=r.target.dataset.note,i=t(r.changedTouches[0],a);c.current=[].concat(Object(D.a)(c.current),[i]),n(c.current),e.triggerAttack(a)},a=function(r){c.current.length>0&&r.preventDefault();var a,o=Object(E.a)(r.changedTouches);try{var u=function(){var r=a.value,o=i(r);if(void 0===o)return{v:void 0};var u=t(r,o.note);c.current=c.current.filter((function(e){return e.note!==u.note})),n.apply(void 0,Object(D.a)(c.current)),e.triggerRelease(u.note)};for(o.s();!(a=o.n()).done;){var s=u();if("object"===typeof s)return s.v}}catch(d){o.e(d)}finally{o.f()}},i=function(e){var t,n=function(e){return{x:e.clientX,y:e.clientY}}(e),r=n.x,a=n.y;return null===(t=document.elementFromPoint(r,a))||void 0===t?void 0:t.dataset},o=function(r){var a,o=Object(E.a)(r.changedTouches);try{var u=function(){var r=a.value,o=i(r);if(void 0===o)return{v:void 0};var u=t(r,o.note),s=c.current.find((function(e){return e.identifier===u.identifier}))||{note:void 0,identifier:u.identifier};u.note!==s.note&&(c.current=c.current.filter((function(e){return e.note!==s.note})),c.current=[].concat(Object(D.a)(c.current),[u]),null!=u.note&&e.triggerAttack(u.note),null!=s.note&&e.triggerRelease(s.note),n(c.current))};for(o.s();!(a=o.n()).done;){var s=u();if("object"===typeof s)return s.v}}catch(d){o.e(d)}finally{o.f()}},u=function(e){e.preventDefault()},s=document.getElementsByClassName("piano")[0];return s.addEventListener("touchstart",r,{passive:!1}),document.addEventListener("touchend",a),document.addEventListener("touchmove",o,{passive:!1}),s.addEventListener("touchmove",u,{passive:!1}),function(){s.removeEventListener("touchstart",r,{passive:!1}),document.removeEventListener("touchend",a),document.removeEventListener("touchmove",o,{passive:!1}),s.addEventListener("touchmove",u,{passive:!1})}}),[e]),[].concat(Object(D.a)(c.current.map((function(e){return e.note}))),Object(D.a)(r.current))};var C=n(0),k=["C","D","E","F","G","A","B"];var A=function(e){var t=e.sampler,n=e.low,r=e.high,c=function(e){var t=Object(i.useState)(null),n=Object(a.a)(t,2)[1],r=Object(i.useState)(null),c=Object(a.a)(r,2)[1],u=o.a.useRef(null),s=o.a.useRef(null),d=o.a.useRef(!1);return Object(i.useEffect)((function(){var e=function(e){if(d.current=!1,void 0!==e.target.dataset){var t=e.target.dataset.note;u.current=null,s.current=t,c(t),n(null)}},t=function(e){if(!0===d.current){if(void 0===e.target.dataset)return;var t=e.target.dataset.note,r=u.current;t!==r&&(u.current=t,s.current=r,n(t),c(r))}},r=function(e){d.current=!0;var t=e.target.dataset.note;t&&(u.current=t,s.current=null,n(t),c(null))};return window.addEventListener("mousedown",r),window.addEventListener("mousemove",t),window.addEventListener("mouseup",e),function(){window.removeEventListener("mousedown",r),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)}}),[e]),[u.current,s.current]}(),u=Object(a.a)(c,2),s=u[0],d=u[1],v=L(t),f=function(e,t){for(var n=function(e,t){var n=e.split(""),r=Object(a.a)(n,2),c=r[0],i=r[1],o=t.split(""),u=Object(a.a)(o,2),s=u[0],d=u[1],v=k.indexOf(c),f=k.indexOf(s);return 7*(d-i)+(f-v+1)}(e,t),r={C:!0,D:!0,E:!1,F:!0,G:!0,A:!0,B:!1},c=e.split(""),i=Object(a.a)(c,2),o=i[0],u=i[1],s=k.indexOf(o),d=[],v=0;v<n;v++){0===s&&v>0&&u++;var f=r[k[s]];d.push({note:k[s]+u,hasNeighbour:f}),s=s>5?0:s+1}return d}(n,r);function l(e,t,n,r){return Object(C.jsx)("path",{id:e,"data-note":t,className:"".concat(n,"-key piano-key ").concat(v.includes(t)||s===t?"active":""),d:r,onContextMenu:function(e){return e.preventDefault()}},e)}return Object(i.useEffect)((function(){null!=s&&t.triggerAttack(s)}),[t,s]),Object(i.useEffect)((function(){null!=d&&t.triggerRelease(d)}),[t,d]),Object(C.jsxs)("svg",{version:"1.1",baseProfile:"full",className:"piano",viewBox:"-1 -1 ".concat(30*f.length+2," 112"),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[f.map((function(e,t){var n=e.note.toLowerCase();return 0===t?l(n,e.note,"white","m 0 0 v 107 a 3 3 0 0 0 3 3 h 27 v -110 z"):t===f.length-1?l(n,e.note,"white","m ".concat(30*t," 0 v 110 h 27 a 3 3 0 0 0 3 -3 v -107 z ")):l(n,e.note,"white","m ".concat(30*t," 0 v 110 h 30 v -110 z"))})),f.map((function(e,t){var n=(e.note.substr(0,1)+"s"+e.note.substr(1)).toLowerCase(),r=e.note.substr(0,1)+"#"+e.note.substr(1);return t===f.length-1?null:e.hasNeighbour?l(n,r,"black","m ".concat(18+30*t," 0 v 63 a 2 2 0 0 0 2 2 h 18 a 2 2 0 0 0 2 -2 v -63 z")):null}))]})},x=new u.a(s),R=new u.a(d),B=new u.a(v),F=new u.a(f),G=new u.a(l),S=new u.a(g),N=new u.a(b),z=new u.a(m),P=new u.a(p),T=new u.a(h),J=new u.a(w),M=new u.a(j),U=new u.a(y);t.default=function(e){var t=e.high,n=e.low,o=(e.children,Object(c.a)(e,["high","low","children"])),s=Object(i.useState)(!1),d=Object(a.a)(s,2),v=d[0],f=d[1],l=Object(O.b)(),g=new u.b({urls:{G1:x,A1:R,C2:B,"D#2":F,"F#2":G,A2:S,C3:N,"D#3":z,"F#3":P,A3:T,C4:J,"D#4":M,"F#4":U},baseUrl:"../../assets/audio",release:1,onload:function(){f(!0)}}).toDestination();return Object(C.jsxs)("div",Object(r.a)(Object(r.a)({className:"piano-container"},o),{},{children:[Object(C.jsx)(O.a,{handle:l,children:v?Object(C.jsx)(A,{sampler:g,low:n,high:t}):null}),Object(C.jsx)("button",{id:"fullscreen-btn",onClick:function(){l.enter()},children:"Enter fullscreen"})]}))}}}]);
//# sourceMappingURL=4.9260678e.chunk.js.map