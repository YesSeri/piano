{"version":3,"sources":["js/main.js"],"names":["c2","require","ds2","fs2","a2","c3","sampler","Tone","Sampler","urls","release","baseUrl","toDestination","PianoKey","note","shortcut","rects","pressed","console","log","classList","add","triggerAttack","remove","triggerRelease","pianoKeys","document","querySelector","startEventListeners","addEventListener","evt","repeat","k","key","playNote","stopNote","lastClicked","pianoRects","getElementsByClassName","matchingKey","findMatchingKey","cancelable","preventDefault","stopPropagation","setTimeout","pianoContainer","getElementById","dataset","window","kbBtn","kbDiv","toggle"],"mappings":"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","file":"main.c7d9d825.js","sourceRoot":"..","sourcesContent":["\"use strict\";\n// The PianoKey class contains every relevant information and thing to create a piano key and play it.\n// The awesome library tone.js is imported in index.html script.\nconst c2 = require('../assets/audio/C2.ogg');\nconst ds2 = require('../assets/audio/Ds2.ogg');\nconst fs2 = require('../assets/audio/Fs2.ogg');\nconst a2 = require('../assets/audio/A2.ogg');\nconst c3 = require('../assets/audio/C3.ogg');\nconst sampler = new Tone.Sampler({\n    urls: {\n        \"C2\": c2,\n        \"D#2\": ds2,\n        \"F#2\": fs2,\n        \"A2\": a2,\n        \"C3\": c3,\n    },\n    release: 1,\n    baseUrl: \"\"\n}).toDestination();\nclass PianoKey {\n    constructor(note, shortcut, rects) {\n        this.note = note\n        this.shortcut = shortcut\n        this.rects = rects\n        this.pressed = false\n    }\n    print() {\n        console.log({ 'note': this.note }, { 'shortcut': this.shortcut }, { 'rects': this.rects }, { 'pressed': this.pressed })\n    }\n    // Clears timeout to stop the fading out, and starts the sound from the beginning with max volume.\n    playNote() {\n        this.pressed = true;\n        this.rects.classList.add('active')\n        sampler.triggerAttack(this.note)\n    }\n    stopNote() {\n        this.pressed = false;\n        this.rects.classList.remove('active')\n        sampler.triggerRelease(this.note)\n    }\n}\n\n// Creates two arrays which will be used to create pianoKey objects that we will use in our piano. \n\nconst pianoKeys = [\n    new PianoKey('C2', \"a\", document.querySelector('.c2')),\n    new PianoKey('D2', \"s\", document.querySelector('.d2')),\n    new PianoKey('E2', \"d\", document.querySelector('.e2')),\n    new PianoKey('F2', \"f\", document.querySelector('.f2')),\n    new PianoKey('G2', \"g\", document.querySelector('.g2')),\n    new PianoKey('A2', \"h\", document.querySelector('.a2')),\n    new PianoKey('B2', \"j\", document.querySelector('.b2')),\n    new PianoKey('C3', \"k\", document.querySelector('.c3')),\n    new PianoKey(\"C#2\", \"w\", document.querySelector('.cs2')),\n    new PianoKey(\"D#2\", \"e\", document.querySelector('.ds2')),\n    new PianoKey(\"F#2\", \"t\", document.querySelector('.fs2')),\n    new PianoKey(\"G#2\", \"y\", document.querySelector('.gs2')),\n    new PianoKey(\"A#2\", \"u\", document.querySelector('.as2')),\n]\nwindow.addEventListener(\"load\", startEventListeners);\nfunction startEventListeners() {\n\n    document.addEventListener('keydown', (evt) => {\n        if (evt.repeat === true) return\n        for (const k of pianoKeys) {\n            if (evt.key === k.shortcut) {\n                if (k.pressed) return\n                k.playNote()\n                return\n            }\n        }\n    })\n    document.addEventListener('keyup', (evt) => {\n        for (const k of pianoKeys) {\n            if (evt.key === k.shortcut) {\n                k.stopNote()\n                return\n            }\n        }\n    })\n\n    let lastClicked = null;\n    const pianoRects = document.getElementsByClassName('piano-key')\n    for (const rects of pianoRects) {\n        const matchingKey = findMatchingKey(rects)\n        rects.addEventListener(\"touchstart\", (evt) => {\n            if (evt.cancelable) {\n                evt.preventDefault();\n            }\n            evt.stopPropagation();\n            matchingKey.playNote();\n        });\n        // This solution is not perfect. If I slide my finger outside the piano container the sound will stop but the \n        rects.addEventListener(\"touchend\", (evt) => {\n            if (evt.cancelable) {\n                evt.preventDefault();\n            }\n            evt.stopPropagation();\n            matchingKey.stopNote();\n        });\n        rects.addEventListener('mousedown', (evt) => {\n            matchingKey.playNote();\n            lastClicked = matchingKey\n        })\n        rects.addEventListener('mouseup', (evt) => {\n            if (lastClicked !== null) {\n                lastClicked.stopNote()\n            }\n        })\n    }\n\n    setTimeout(() => {\n        const pianoContainer = document.getElementById('piano-container')\n        const loadingDiv = document.getElementById('loading-div')\n        loadingDiv.classList.add('hidden')\n        pianoContainer.classList.remove('piano-hidden')\n    }, 500)\n\n}\n\n\n\nfunction findMatchingKey(rects) {\n    for (const key of pianoKeys) {\n        if (rects.dataset.note === key.note) {\n            return key\n        }\n    }\n}\n// function startup() {\n//     const piano = document.getElementById(\"canvas\");\n//     el.addEventListener(\"touchend\", handleEnd, false);\n//     el.addEventListener(\"touchcancel\", handleCancel, false);\n//     el.addEventListener(\"touchmove\", handleMove, false);\n// }\n\n// document.addEventListener(\"DOMContentLoaded\", startup);\n\nconst kbBtn = document.getElementById('keybindings-btn')\nconst kbDiv = document.getElementById('keybindings-div')\n\nkbBtn.addEventListener('click', () => {\n    kbBtn.classList.toggle('clicked')\n    kbDiv.classList.toggle('hidden')\n})"]}