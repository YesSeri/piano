{"version":3,"sources":["assets/audio/index.js","js/main.js"],"names":["require","c4","ds4","fs4","a4","c5","PianoKey","note","shortcut","rects","pressed","console","log","sampler","classList","add","triggerAttack","remove","triggerRelease","pianoKeys","document","getElementById","overlay","addEventListener","script","createElement","onload","Tone","Sampler","urls","release","baseUrl","toDestination","startEventListeners","evt","repeat","k","key","playNote","stopNote","lastClicked","pianoRects","querySelectorAll","matchingKey","findMatchingKey","cancelable","preventDefault","stopPropagation","fsBtn","test","navigator","userAgent","innerContainer","innerText","appendChild","pianoContainer","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","contains","dataset","kbBtn","kbDiv","toggle","src","body"],"mappings":"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","file":"main.fb6bbcaf.js","sourceRoot":"..","sourcesContent":["export { default as c4 } from './6.c4.ogg';\r\nexport { default as ds4 } from './9.ds4.ogg';\r\nexport { default as fs4 } from './12.fs4.ogg';\r\nexport { default as a4 } from './15.a4.ogg';\r\nexport { default as c5 } from './18.c5.ogg';","\"use strict\";\r\n\r\n// The PianoKey class contains every relevant information and thing to create a piano key and play it.\r\n// The awesome library tone.js is imported in index.html script.\r\nconst { c4, ds4, fs4, a4, c5 } = require('../assets/audio/');\r\nclass PianoKey {\r\n    constructor(note, shortcut, rects) {\r\n        this.note = note\r\n        this.shortcut = shortcut\r\n        this.rects = rects\r\n        this.pressed = false\r\n    }\r\n    print() {\r\n        console.log({ 'note': this.note }, { 'shortcut': this.shortcut }, { 'rects': this.rects }, { 'pressed': this.pressed })\r\n    }\r\n    playNote(sampler) {\r\n        this.pressed = true;\r\n        this.rects.classList.add('active')\r\n        sampler.triggerAttack(this.note)\r\n    }\r\n    stopNote(sampler) {\r\n        this.pressed = false;\r\n        this.rects.classList.remove('active')\r\n        sampler.triggerRelease(this.note)\r\n    }\r\n}\r\n\r\nconst pianoKeys = [\r\n    new PianoKey('C2', \"a\", document.getElementById('c2')),\r\n    new PianoKey('D2', \"s\", document.getElementById('d2')),\r\n    new PianoKey('E2', \"d\", document.getElementById('e2')),\r\n    new PianoKey('F2', \"f\", document.getElementById('f2')),\r\n    new PianoKey('G2', \"g\", document.getElementById('g2')),\r\n    new PianoKey('A2', \"h\", document.getElementById('a2')),\r\n    new PianoKey('B2', \"j\", document.getElementById('b2')),\r\n    new PianoKey('C3', \"k\", document.getElementById('c3')),\r\n    new PianoKey(\"C#2\", \"w\", document.getElementById('cs2')),\r\n    new PianoKey(\"D#2\", \"e\", document.getElementById('ds2')),\r\n    new PianoKey(\"F#2\", \"t\", document.getElementById('fs2')),\r\n    new PianoKey(\"G#2\", \"y\", document.getElementById('gs2')),\r\n    new PianoKey(\"A#2\", \"u\", document.getElementById('as2')),\r\n]\r\n\r\nconst overlay = document.getElementById('activate-piano-overlay')\r\noverlay.addEventListener('click', () => {\r\n    overlay.remove();\r\n    const script = document.createElement('script');\r\n    script.onload = () => {\r\n        const sampler = new Tone.Sampler({\r\n            urls: {\r\n                \"C2\": c4,\r\n                \"D#2\": ds4,\r\n                \"F#2\": fs4,\r\n                \"A2\": a4,\r\n                \"C3\": c5,\r\n            },\r\n            release: 1,\r\n            baseUrl: \"\"\r\n        }).toDestination();\r\n\r\n        // I wait with initiating eventlisterners until everything is loaded, including the sound library ToneJS. \r\n        startEventListeners();\r\n        function startEventListeners() {\r\n            document.addEventListener('keydown', (evt) => {\r\n                if (evt.repeat === true) return\r\n                for (const k of pianoKeys) {\r\n                    if (evt.key === k.shortcut) {\r\n                        if (k.pressed) return\r\n                        k.playNote(sampler)\r\n                        return\r\n                    }\r\n                }\r\n            })\r\n            document.addEventListener('keyup', (evt) => {\r\n                for (const k of pianoKeys) {\r\n                    if (evt.key === k.shortcut) {\r\n                        k.stopNote(sampler)\r\n                        return\r\n                    }\r\n                }\r\n            })\r\n\r\n            let lastClicked = null;\r\n            const pianoRects = document.querySelectorAll('#piano-svg > .piano-key')\r\n            for (const rects of pianoRects) {\r\n                const matchingKey = findMatchingKey(rects)\r\n                rects.addEventListener(\"touchstart\", (evt) => {\r\n                    if (evt.cancelable) {\r\n                        evt.preventDefault();\r\n                    }\r\n                    evt.stopPropagation();\r\n                    matchingKey.playNote(sampler);\r\n                });\r\n                // This solution is not perfect. I can't slid my finger along the keyboard to play a lot of notes.\r\n                rects.addEventListener(\"touchend\", (evt) => {\r\n                    if (evt.cancelable) {\r\n                        evt.preventDefault();\r\n                    }\r\n                    evt.stopPropagation();\r\n                    matchingKey.stopNote(sampler);\r\n                });\r\n                rects.addEventListener('mousedown', (evt) => {\r\n                    matchingKey.playNote(sampler);\r\n                    lastClicked = matchingKey\r\n                })\r\n                rects.addEventListener('mouseup', (evt) => {\r\n                    if (lastClicked !== null) {\r\n                        lastClicked.stopNote(sampler)\r\n                    }\r\n                })\r\n            }\r\n            // I only want to show a fullscreen button if the user is using a mobile device. There is no need for it on a computer.\r\n            const fsBtn = document.createElement(\"BUTTON\")\r\n            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n                const innerContainer = document.getElementById('inner-container')\r\n                fsBtn.innerText = \"Fullscreen\"\r\n                innerContainer.appendChild(fsBtn)\r\n                console.log(\"Fullscreen button added, because you are using a mobile device.\");\r\n            } else {\r\n                console.log(\"Fullscreen has not been added, because you are not using a mobile device.\");\r\n            }\r\n            // Requests fullscreen when clicked. Several versions for compatibilit reasons. \r\n            fsBtn.addEventListener('click', () => {\r\n                const pianoContainer = document.getElementById('piano-container')\r\n                if (pianoContainer.requestFullscreen) {\r\n                    pianoContainer.requestFullscreen();\r\n                } else if (pianoContainer.webkitRequestFullscreen) { /* Safari */\r\n                    pianoContainer.webkitRequestFullscreen();\r\n                } else if (pianoContainer.msRequestFullscreen) { /* IE11 */\r\n                    pianoContainer.msRequestFullscreen();\r\n                }\r\n            })\r\n            // Runs when entering or exiting fullscreen\r\n            document.addEventListener('fullscreenchange', () => {\r\n                const { classList } = document.getElementById('piano-svg')\r\n                classList.contains('fs-screen-piano') ? classList.remove('fs-screen-piano') : classList.add('fs-screen-piano')\r\n            }, false);\r\n        }\r\n\r\n        // Helper function used when adding eventlisteners.\r\n        function findMatchingKey(rects) {\r\n            for (const key of pianoKeys) {\r\n                if (rects.dataset.note === key.note) {\r\n                    return key\r\n                }\r\n            }\r\n        }\r\n\r\n        const kbBtn = document.getElementById('keybindings-btn')\r\n        const kbDiv = document.getElementById('keybindings-div')\r\n\r\n        // This toggles the visibility of the keybindings.\r\n        kbBtn.addEventListener('click', () => {\r\n            kbBtn.classList.toggle('clicked')\r\n            kbDiv.classList.toggle('hidden')\r\n        })\r\n\r\n    };\r\n    script.src = \"https://unpkg.com/tone@14.7.77/build/Tone.js\";\r\n    document.body.appendChild(script);\r\n})"]}