{"version":3,"sources":["js/main.js"],"names":["c2","require","ds2","fs2","a2","c3","document","addEventListener","script","createElement","onload","sampler","Tone","Sampler","urls","release","baseUrl","toDestination","PianoKey","note","shortcut","rects","pressed","console","log","classList","add","triggerAttack","remove","triggerRelease","pianoKeys","getElementById","startEventListeners","evt","repeat","k","key","playNote","stopNote","lastClicked","pianoRects","getElementsByClassName","matchingKey","findMatchingKey","dataset","cancelable","preventDefault","stopPropagation","fsBtn","test","navigator","userAgent","innerContainer","innerText","appendChild","pianoContainer","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","contains","kbBtn","kbDiv","toggle","src","body"],"mappings":"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","file":"main.bc90b9bf.js","sourceRoot":"..","sourcesContent":["\"use strict\";\r\n// The PianoKey class contains every relevant information and thing to create a piano key and play it.\r\n// The awesome library tone.js is imported in index.html script.\r\nconst c2 = require('../assets/audio/C2.ogg');\r\nconst ds2 = require('../assets/audio/Ds2.ogg');\r\nconst fs2 = require('../assets/audio/Fs2.ogg');\r\nconst a2 = require('../assets/audio/A2.ogg');\r\nconst c3 = require('../assets/audio/C3.ogg');\r\n\r\ndocument.addEventListener('click', () => {\r\n    const script = document.createElement('script');\r\n\r\n    script.onload = () => {\r\n        //do stuff with the script\r\n\r\n        const sampler = new Tone.Sampler({\r\n            urls: {\r\n                \"C2\": c2,\r\n                \"D#2\": ds2,\r\n                \"F#2\": fs2,\r\n                \"A2\": a2,\r\n                \"C3\": c3,\r\n            },\r\n            release: 1,\r\n            baseUrl: \"\"\r\n        }).toDestination();\r\n        class PianoKey {\r\n            constructor(note, shortcut, rects) {\r\n                this.note = note\r\n                this.shortcut = shortcut\r\n                this.rects = rects\r\n                this.pressed = false\r\n            }\r\n            print() {\r\n                console.log({ 'note': this.note }, { 'shortcut': this.shortcut }, { 'rects': this.rects }, { 'pressed': this.pressed })\r\n            }\r\n            playNote() {\r\n                this.pressed = true;\r\n                this.rects.classList.add('active')\r\n                sampler.triggerAttack(this.note)\r\n            }\r\n            stopNote() {\r\n                this.pressed = false;\r\n                this.rects.classList.remove('active')\r\n                sampler.triggerRelease(this.note)\r\n            }\r\n        }\r\n\r\n        const pianoKeys = [\r\n            new PianoKey('C2', \"a\", document.getElementById('c2')),\r\n            new PianoKey('D2', \"s\", document.getElementById('d2')),\r\n            new PianoKey('E2', \"d\", document.getElementById('e2')),\r\n            new PianoKey('F2', \"f\", document.getElementById('f2')),\r\n            new PianoKey('G2', \"g\", document.getElementById('g2')),\r\n            new PianoKey('A2', \"h\", document.getElementById('a2')),\r\n            new PianoKey('B2', \"j\", document.getElementById('b2')),\r\n            new PianoKey('C3', \"k\", document.getElementById('c3')),\r\n            new PianoKey(\"C#2\", \"w\", document.getElementById('cs2')),\r\n            new PianoKey(\"D#2\", \"e\", document.getElementById('ds2')),\r\n            new PianoKey(\"F#2\", \"t\", document.getElementById('fs2')),\r\n            new PianoKey(\"G#2\", \"y\", document.getElementById('gs2')),\r\n            new PianoKey(\"A#2\", \"u\", document.getElementById('as2')),\r\n        ]\r\n        // I wait with initiating eventlisterners until everything is loaded, including the sound library ToneJS. \r\n        startEventListeners();\r\n        function startEventListeners() {\r\n            document.addEventListener('keydown', (evt) => {\r\n                if (evt.repeat === true) return\r\n                for (const k of pianoKeys) {\r\n                    if (evt.key === k.shortcut) {\r\n                        if (k.pressed) return\r\n                        k.playNote()\r\n                        return\r\n                    }\r\n                }\r\n            })\r\n            document.addEventListener('keyup', (evt) => {\r\n                for (const k of pianoKeys) {\r\n                    if (evt.key === k.shortcut) {\r\n                        k.stopNote()\r\n                        return\r\n                    }\r\n                }\r\n            })\r\n\r\n            let lastClicked = null;\r\n            const pianoRects = document.getElementsByClassName('piano-key')\r\n            for (const rects of pianoRects) {\r\n                const matchingKey = findMatchingKey(rects)\r\n                rects.addEventListener(\"touchstart\", (evt) => {\r\n                    if (evt.cancelable) {\r\n                        evt.preventDefault();\r\n                    }\r\n                    evt.stopPropagation();\r\n                    matchingKey.playNote();\r\n                });\r\n                // This solution is not perfect. I can't slid my finger along the keyboard to play a lot of notes.\r\n                rects.addEventListener(\"touchend\", (evt) => {\r\n                    if (evt.cancelable) {\r\n                        evt.preventDefault();\r\n                    }\r\n                    evt.stopPropagation();\r\n                    matchingKey.stopNote();\r\n                });\r\n                rects.addEventListener('mousedown', (evt) => {\r\n                    matchingKey.playNote();\r\n                    lastClicked = matchingKey\r\n                })\r\n                rects.addEventListener('mouseup', (evt) => {\r\n                    if (lastClicked !== null) {\r\n                        lastClicked.stopNote()\r\n                    }\r\n                })\r\n            }\r\n            // I only want to show a fullscreen button if the user is using a mobile device. There is no need for it on a computer.\r\n            const fsBtn = document.createElement(\"BUTTON\")\r\n            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\r\n                const innerContainer = document.getElementById('inner-container')\r\n                fsBtn.innerText = \"Fullscreen\"\r\n                innerContainer.appendChild(fsBtn)\r\n                console.log(\"Fullscreen button added, because you are using a mobile device.\");\r\n            } else {\r\n                console.log(\"Fullscreen has not been added, because you are not using a mobile device.\");\r\n            }\r\n            // Requests fullscreen when clicked. Several versions for compatibilit reasons. \r\n            fsBtn.addEventListener('click', () => {\r\n                const pianoContainer = document.getElementById('piano-container')\r\n                if (pianoContainer.requestFullscreen) {\r\n                    pianoContainer.requestFullscreen();\r\n                } else if (pianoContainer.webkitRequestFullscreen) { /* Safari */\r\n                    pianoContainer.webkitRequestFullscreen();\r\n                } else if (pianoContainer.msRequestFullscreen) { /* IE11 */\r\n                    pianoContainer.msRequestFullscreen();\r\n                }\r\n            })\r\n            // Runs when entering or exiting fullscreen\r\n            document.addEventListener('fullscreenchange', () => {\r\n                const { classList } = document.getElementById('piano-svg')\r\n                classList.contains('fs-screen-piano') ? classList.remove('fs-screen-piano') : classList.add('fs-screen-piano')\r\n            }, false);\r\n            // setTimeout(() => {\r\n                // const pianoContainer = document.getElementById('piano-container')\r\n                // const loadingDiv = document.getElementById('loading-div')\r\n                // loadingDiv.classList.add('hidden')\r\n                // pianoContainer.classList.remove('piano-hidden')\r\n            // }, 300)\r\n\r\n        }\r\n\r\n        // Helper function used when adding eventlisteners.\r\n        function findMatchingKey(rects) {\r\n            for (const key of pianoKeys) {\r\n                if (rects.dataset.note === key.note) {\r\n                    return key\r\n                }\r\n            }\r\n        }\r\n\r\n        const kbBtn = document.getElementById('keybindings-btn')\r\n        const kbDiv = document.getElementById('keybindings-div')\r\n\r\n        // This toggles the visibility of the keybindings.\r\n        kbBtn.addEventListener('click', () => {\r\n            kbBtn.classList.toggle('clicked')\r\n            kbDiv.classList.toggle('hidden')\r\n        })\r\n\r\n    };\r\n    script.src = \"https://unpkg.com/tone@14.7.77/build/Tone.js\";\r\n    document.body.appendChild(script);\r\n})"]}